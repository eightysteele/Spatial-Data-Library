# Test configuration for bulkloading Bio1 Cell and CellIndex entities.

python_preamble:
- import: base64
- import: re
- import: google.appengine.ext.bulkload.transform
- import: google.appengine.ext.bulkload.bulkloader_wizard
- import: google.appengine.ext.db
- import: google.appengine.api.datastore
- import: google.appengine.api.users
- import: helper

transformers:

- kind: Cell
  connector: csv
  connector_options:
    encoding: utf_8

  property_map:
    - property: __key__
      external_name: CellKey
      import_transform: transform.create_foreign_key('Cell')

    - property: r
      external_name: RID
      import_transform: transform.none_if_empty(str)

- kind: CellIndex
  connector: csv
  connector_options:
    encoding: utf_8
  
  property_map:
    - property: __key__
      external_name: CellKey
      import_transform: helper.create_key() 

    - property: n
      external_name: varname
      import_transform: helper.get_varname()

    - property: v
      external_name: avg_Band1
      import_transform: helper.get_varval()


    - property: i0
      external_name: avg_Band1
      import_transform: helper.create_index(0)


    - property: i1
      external_name: avg_Band1
      import_transform: helper.create_index(1)


    - property: i2
      external_name: avg_Band1
      import_transform: helper.create_index(2)


    - property: i3
      external_name: avg_Band1
      import_transform: helper.create_index(3)


    - property: i4
      external_name: avg_Band1
      import_transform: helper.create_index(4)


    - property: i5
      external_name: avg_Band1
      import_transform: helper.create_index(5)


    - property: i6
      external_name: avg_Band1
      import_transform: helper.create_index(6)


    - property: i7
      external_name: avg_Band1
      import_transform: helper.create_index(7)


    - property: i8
      external_name: avg_Band1
      import_transform: helper.create_index(8)


    - property: i9
      external_name: avg_Band1
      import_transform: helper.create_index(9)


    - property: i10
      external_name: avg_Band1
      import_transform: helper.create_index(10)


    - property: i11
      external_name: avg_Band1
      import_transform: helper.create_index(11)


    - property: i12
      external_name: avg_Band1
      import_transform: helper.create_index(12)


    - property: i13
      external_name: avg_Band1
      import_transform: helper.create_index(13)

  #post_import_function: helper.add_dynamic_properties